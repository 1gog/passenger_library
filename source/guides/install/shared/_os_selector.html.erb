<%# Be sure to also update deployment_walkthrough_helpers.rb, method #available_os_configs %>

<%
if context != :install_passenger && !needs_install_passenger?(locals)
  raise "_os_selector.html may only be included outside the :install_passenger context if `needs_install_passenger?` is true. In cases where Passenger does not need to be installed (e.g. when Passenger Standalone + Ruby is applicable), you should include a page under the deploy_app/ directory directly, without showing the OS selector."
end
%>

<p><select id="os_install_select">
  <option value="none" selected>Please select an operating system</option>
  <option value="debian">Debian, Ubuntu</option>
  <option value="redhat">Red Hat, CentOS</option>
  <% if edition_type == :oss %>
    <%# Passenger Enterprise cannot be installed via Homebrew %>
    <option value="osx">Mac OS X</option>
  <% end %>
  <option value="other">Other</option>
</select></p>

<div class="install_os install_os_debian" style="display: none">
  <p><select id="debian_version_select">
    <%= debian_version_selection_options %>
    <% if context == :install_passenger %>
      <option value="other">Other</option>
    <% end %>
  </select></p>

  <div class="unsupported_debian_instructions">
    Is your Debian or Ubuntu version not listed? Then sorry, we do not provide packages for this version at the moment. Please follow the <a href="javascript:void(showGenericInstallationInstructions())">generic installation instructions</a>.
  </div>
</div>

<div class="install_os install_os_redhat" style="display: none">
  <p><select id="redhat_version_select">
    <%= redhat_version_selection_options %>
    <% if context == :install_passenger %>
      <option value="other">Other</option>
    <% end %>
  </select></p>

  <div class="unsupported_redhat_instructions">
    Is your Red Hat or CentOS version not listed? Then sorry, we do not provide packages for this version at the moment. Please follow the <a href="javascript:void(showGenericInstallationInstructions())">generic installation instructions</a>.
  </div>
</div>

<div class="install_os install_os_other" style="display: none">
  <p><select id="generic_install_method_select">
    <% if context == :install_passenger %>
      <option value="none" selected>Please select an installation method</option>
      <option value="tarball">Source tarball</option>
      <% if language_type == :ruby %>
        <option value="rubygems_rvm">RubyGems (with RVM)</option>
        <option value="rubygems_norvm">RubyGems (without RVM)</option>
      <% end %>
    <% else %>
      <option value="none" selected>Please specify how Passenger was installed</option>
      <option value="tarball">Through source tarball</option>
      <% if language_type == :ruby %>
        <option value="rubygems_rvm">Through RubyGems (with RVM)</option>
        <option value="rubygems_norvm">Through RubyGems (without RVM)</option>
      <% end %>
    <% end %>
  </select></p>
</div>

<% if context == :install_passenger %>
  <div class="install_os install_os_none" style="display: none">
    <p><small><a href="#windows_not_supported" data-toggle="collapse" aria-expanded="false" aria-controls="windows_not_supported">(Windows is not supported)</a></small></p>

    <div class="collapse" id="windows_not_supported">
      <div class="note">
        Our apologies to Windows users. Passenger doesn't support Windows. We require a Unix-like operating system.
      </div>
    </div>
  </div>
<% end %>

<div class="install_os install_os_any">
  <a href="." class="btn btn-primary install_os_continue" data-next-page="<%= next_page %>">Continue &raquo;</a>
</div>
